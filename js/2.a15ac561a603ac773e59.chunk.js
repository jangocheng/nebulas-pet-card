webpackJsonp([2],{343:function(t,e,a){"use strict";function n(t){i||a(357)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(350),r=a(358),i=!1,o=a(140),l=n,c=o(s.a,r.a,!1,l,"data-v-d3fd8230",null);c.options.__file="src/views/cardList.vue",e.default=c.exports},348:function(t,e,a){t.exports=a.p+"d36b382ab87824a77ba0d1d7f30b78de.png"},350:function(t,e,a){"use strict";var n=a(141),s=a(66),r=a(142),i=(a.n(r),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),o=new s.a;e.a={data:function(){return{account:null,page:1,limit:12,size:0,petCards:[],loading:!0,interval:null,noMoreData:!1,exCount:0,rewardValue:""}},created:function(){var t=this;this.interval=setInterval(function(){t.exCount>5&&(clearInterval(t.interval),t.showError()),t.exCount++,t.initAccount()},1e3)},filters:{dateFmt:function(t){if(t){var e="object"!==(void 0===t?"undefined":i(t))?new Date(t):t,a={year:e.getFullYear(),month:e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,day:e.getDate()<10?"0"+e.getDate():e.getDate(),hour:e.getHours()<10?"0"+e.getHours():e.getHours(),min:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),sec:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()};return a.year+"年"+a.month+"月"+a.day+"日"}return"未知"}},methods:{initAccount:function(){var t=localStorage.getItem("nasAddress");t&&(clearInterval(this.interval),this.account=r.Account.fromAddress(t),this.getPetCards())},showError:function(){this.$Modal.warning({title:"请先安装浏览器钱包插件",content:'<p>检测到你还没安装浏览器钱包插件，请先<a href="https://github.com/ChengOrangeJu/WebExtensionWallet" target="_blank">安装 NAS 钱包插件</a></p><br>\n                          <p>如果你还没有创建 NAS 钱包，可以参考官方教程进行创建「<a href="https://blog.nebulas.io/2018/04/12/creating-a-nas-wallet/" target="_blank">星云Web钱包教程1：创建NAS钱包</a>」</p><br>\n                          <p>确认导入钱包并解锁后，请刷新页面重新进行操作 :)</p>'})},getMaxAmount:function(){var t=this,e=n.a.getContractAddress();o.simulateCall(e,"0","getAmountOfPetCards","[]",{listener:function(e){t.size=n.a.parse(e.result)}})},getPetCards:function(){var t=this;if(!this.account)return void this.showError();var e=n.a.getContractAddress(),a=n.a.toSting([this.page,this.limit]);o.simulateCall(e,"0","getPetCards",a,{listener:function(e){var a=n.a.parse(e.result);t.petCards=a.petCards,t.size=a.size,t.noMoreData=!t.petCards.length,t.loading=!1}})},handlePageChange:function(t){this.loading=!0,this.page=t,this.getPetCards()},handleLikeCallback:function(t){"string"!=typeof t?this.$Modal.success({title:"赞赏成功",content:"感谢您的赞赏 :)"}):this.$Modal.error({title:"交易取消",content:"赞赏失败 :("}),this.loading=!1},handleLikeClick:function(t){var e=this;this.$Modal.confirm({render:function(t){return t("div",[t("p","* 赞赏单位为 NAS（1 NAS = 1EWei = 10^18 Wei）"),t("Input",{props:{value:e.rewardValue,autofocus:!0,placeholder:"请输入赞赏数额..."},on:{input:function(t){e.rewardValue=t}}})])},onOk:function(){e.loading=!0;var a=n.a.toSting([t]);o.call(n.a.getContractAddress(),e.rewardValue,"giveItReward",a,{listener:e.handleLikeCallback})}})}}}},357:function(t,e){},358:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index pet-mb-160"},[n("Row",{attrs:{type:"flex",align:"middle"}},t._l(t.petCards,function(e){return n("Col",{key:e.id,staticStyle:{"text-align":"center"},attrs:{span:"4"}},[n("Card",{staticClass:"pet-mb-32 pet-mr-8"},[n("Row",{staticClass:"pet-pt-16 pet-pb-16",attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("img",{staticClass:"pet-avatar",attrs:{src:e.photo,alt:""}})]),t._v(" "),n("Col",{attrs:{span:"24"}},[n("Button",{attrs:{type:"error",shape:"circle",icon:"heart",size:"large"},on:{click:function(a){t.handleLikeClick(e.id)}}},[t._v("赞赏")]),t._v(" "),n("router-link",{attrs:{to:"/detail/"+e.id}},[n("Button",{attrs:{type:"ghost",shape:"circle",icon:"chatbubble-working",size:"large"}},[t._v("评论")])],1)],1)],1),t._v(" "),n("Row",{staticClass:"pet-pt-16 pet-pb-16",attrs:{type:"flex",justify:"center",align:"top"}},[n("Col",{attrs:{span:"24"}},[n("div",[n("Row",{attrs:{type:"flex",justify:"center",align:"top"}},[n("Col",{attrs:{span:"8"}},[n("p",{staticClass:"text-right"},[n("Icon",{attrs:{type:"at"}}),t._v(" ID")],1)]),t._v(" "),n("Col",{attrs:{span:"16"}},[n("p",{staticClass:"text-left"},[t._v(t._s(e.id))])]),t._v(" "),n("Col",{attrs:{span:"8"}},[n("p",{staticClass:"text-right"},[n("Icon",{attrs:{type:"social-octocat"}}),t._v("名称")],1)]),t._v(" "),n("Col",{attrs:{span:"16"}},[n("p",{staticClass:"text-left"},[t._v(t._s(e.name))])]),t._v(" "),n("Col",{attrs:{span:"8"}},[n("p",{staticClass:"text-right"},[n("Icon",{attrs:{type:"ios-paw"}}),t._v("生日")],1)]),t._v(" "),n("Col",{attrs:{span:"16"}},[n("p",{staticClass:"text-left"},[t._v(t._s(t._f("dateFmt")(e.birthday)))])])],1)],1)])],1)],1)],1)})),t._v(" "),t.noMoreData?n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"12"}},[n("div",{staticStyle:{"text-align":"center"}},[n("h1",[n("img",{attrs:{src:a(348),alt:""}})]),t._v(" "),n("h2",{staticClass:"pet-mb-32"},[t._v("这里已经没有更多的内容啦~")])])])],1):t._e(),t._v(" "),n("Page",{attrs:{total:t.size,"page-size":t.limit,"show-elevator":"","show-total":""},on:{"on-change":t.handlePageChange}},[t._v("共 "+t._s(t.size)+" 张")]),t._v(" "),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},s=[];n._withStripped=!0;var r={render:n,staticRenderFns:s};e.a=r}});